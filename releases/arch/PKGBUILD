# Maintainer: Florent Linguenheld <florent@linguenheld.fr>
pkgname='kebb'
pkgver=1.3.0
pkgrel=1
pkgdesc="Game to improve your typing skills"
arch=('x86_64')
url="https://github.com/flinguenheld/kebb"
license=('GPL')
depends=('sdl2_ttf' 'sdl2' 'gcc-libs' 'glibc' 'lib32-gcc-libs')
makedepends=('make' 'cmake' 'gcc')
source=("$pkgname-$pkgver::https://github.com/flinguenheld/kebb/archive/refs/tags/v$pkgver.tar.gz")
md5sums=('9f465c647c6023976cd1bdf61b58f020')

build() {
	cd "$srcdir/$pkgname-$pkgver"
	mkdir -p build
	cd build
	cmake -DRELEASE_LINUX=ON ..
	make -j4
}

package() {
	cd "$pkgname-$pkgver/build"
	mkdir -p "$pkgdir/usr/bin"
	chmod +x "$pkgname"
	cp "$pkgname" "$pkgdir/usr/bin/$pkgname"

	cd ..
	mkdir -p "$pkgdir/usr/share/$pkgname/font"
	mkdir -p "$pkgdir/usr/share/$pkgname/layout"
	mkdir -p "$pkgdir/usr/share/applications"
	cp -R font/ "$pkgdir/usr/share/$pkgname"
	cp -R layout/ "$pkgdir/usr/share/$pkgname"

	cp icon/kebb.png "$pkgdir/usr/share/$pkgname/"
	cp icon/kebb.desktop "$pkgdir/usr/share/applications/"
}
